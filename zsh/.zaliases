#!/usr/bin/env zsh

# Make commands respect aliases
alias ds='doas '
mn() {
    page="$(ls -la "$(which "$1")" 2>/dev/null)"
    [[ -n "$page" ]] && page="${page##*/}" || page="$1"
    man "$page"
}

# Color aliases
alias ls='exa'
alias l='ls --color=auto --group-directories-first'
alias ll='l -alF'
alias la='ll -R'
alias lss='less --use-color --color=d+b --color=P+c --color=u+g'

# Basic programs
alias g='git'
alias dk='docker'
alias ka='killall'
alias perg='printenv | rg'
alias sctl='systemctl'
alias rs="rsync -e 'ssh -F $XDG_CONFIG_HOME/ssh/config'"
alias ssh="ssh -F $XDG_CONFIG_HOME/ssh/config"
alias sy='sioyek'
alias tcli='transmission-cli'
alias tdae="transmission-daemon --logfile $XDG_STATE_HOME/transmission-daemon.log &"

# Make
alias mkc='make clean'
alias mkcic='mkc install && make clean'
alias mku='mk uninstall'

# Pacman
alias pm='pacman'
alias pmqg='pacman -Q | rg'

# Virtualenv
alias rmv='rm -rf venv'
alias srcv='. venv/bin/activate'
alias dv='deactivate'

# Nvim
nv() {
    if [[ -z "$*" ]]; then
        nvim -c 'NvimTreeOpen' .
    else
        if [[ -f "$1" ]] && (( $(wc -l "$1" | cut -d ' ' -f 1) > 5000 )); then
            nvim --noplugin "$*"
        else
            nvim "$*"
        fi
    fi
}

# Yarn
wool() {
    yarn --use-yarnrc "$XDG_CONFIG_HOME/yarn/config" "$@"
    test -f "$HOME/.yarnrc" && rm "$HOME/.yarnrc"
}

# Misc
alias cp='cp -v'
gcl() { . _gcl "$@" }
rmd() { [[ "$1" == "$HOME" ]] || rm -rf "$@"; }
alias mkd='mkdir -pv'
mkcd() { mkdir -pv "$1" && cd "$1"; }
alias psag='ps aux | rg'
-() { cd - >/dev/null; }
j() { . _j "$@"; }
declare -A dirs=(['']=~ [dl]=~/dl [scr]="$SCRIPTS" [dev]=~/dev [tcf]=~/dev/theCourseForum2 [dots]=~/dev/dots [cp]=~/dev/cp [nv]=~/.config/nvim [paq]=~/.local/share/nvim/site/pack/paqs/start [tm]=~/.config/tmux [x11]=~/.config/X11 [zsh]=~/.config/zsh [site]=~/dev/barrett-ruth.github.io [sl]=~/dev/sl)
for e in ~/dev/sl/*; do
    [[ -d "$e" ]] && dirs[$(basename "$e")]="$e"
done
