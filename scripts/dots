#!/bin/sh

cd "$HOME"/dev/dots || exit

rmb .git readme.md rg linux fonts kitty X11 pip.Darwin.txt pip.Linux.txt pnpm.Linux.txt pnpm.Darwin.txt .

if [ "$(uname)" = 'Darwin' ]; then
  cp -rf "$XDG_CONFIG_HOME"/kitty .
  cp -r "$XDG_CONFIG_HOME"/karabiner/karabiner.json karabiner.json

  brew list >brew.txt
else
  cp -fr "$XDG_CONFIG_HOME"/X11 .
  pacman -Q >pacman.txt
fi

cp -r "$SCRIPTS" .

for folder in git npm nvim python tmux sioyek yamllint zsh; do
  cp -r "$XDG_CONFIG_HOME/$folder" . 2>/dev/null
done

rmb tmux.conf tmux
rmb .zaliases .zprofile .zshrc zsh

pnpm -g list >pnpm."$(uname)".txt
pip freeze >pip."$(uname)".txt
