#!/bin/sh

[ "$3" ] || exit
dir="$HOME/doc/$1"
ext="$2"
prompt="$3"

leave() {
    sioyek "$1"
    exit
}

for i in "$dir"/*; do
    test -d "$i" && get_docs "$i" || docs="$docs\n$(echo "$i" | sed "s|\.$ext||g;s|$dir/||g")"
done

docs="${docs#??}"

entry="$(echo "$docs" | dmenu -i -p "$prompt:")"

[ "$entry" ] || exit

leave "$dir/$entry.$ext"
